<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>S32DSé›†æˆMCAL</title>
    <link href="/posts/f2c01706/"/>
    <url>/posts/f2c01706/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ç®€ä»‹ï¼šMCU ä¸º NXP-S32K344ï¼›RTD MCAL ç‰ˆæœ¬ä¸º <code>SW32K3_RTD_R21-11_4.0.0_HF_02</code> ï¼›S32DS 3.5ï¼›EB Tresos 29.0</p></blockquote><h2 id="1-å®‰è£…-MCAL"><a href="#1-å®‰è£…-MCAL" class="headerlink" title="1 å®‰è£… MCAL"></a>1 å®‰è£… MCAL</h2><p>ä¸‹è½½æ­¤ç‰ˆæœ¬çš„ RTDï¼š<code>S32K3_S32M27x Real-Time Drivers AUTOSAR R21-11 Version 4.0.0 HF02</code></p><p><img src="/posts/f2c01706/4155c4d63fbc44a1ae44fb0a34f2e5c7_MD5.jpeg"></p><p>ä¸‹è½½å¹¶å®‰è£…æ­¤ç‰ˆæœ¬çš„ MCALï¼š</p><p><img src="/posts/f2c01706/556b712927fb214779e0a7dc24fba1c5_MD5.jpeg"></p><p>è¿™é‡Œï¼Œæˆ‘çš„å®‰è£…åçš„ MCAL çš„è·¯å¾„å¦‚ä¸‹ï¼š</p><p><img src="/posts/f2c01706/bd995acaed19722bd0a14013bc91b6ab_MD5.jpeg"></p><h3 id="1-1-MCAL-çš„é…ç½®"><a href="#1-1-MCAL-çš„é…ç½®" class="headerlink" title="1.1 MCAL çš„é…ç½®"></a>1.1 MCAL çš„é…ç½®</h3><p>å¤åˆ¶ MCAL è·¯å¾„ä¸‹çš„<em>æ‰€æœ‰æ¨¡å—</em>åˆ°ä¸€ä¸ª<em>ä¸´æ—¶æ–‡ä»¶å¤¹</em>ä¸­è¿›è¡Œä¸‹ä¸€æ­¥å¤„ç†ï¼Œæˆ‘è¿™é‡Œå°±æ˜¯å¤åˆ¶ <code>D:\NXP\exe\SW32K3_RTD_R21-11_4.0.0_HF_02\eclipse\plugins</code> ä¸‹çš„æ‰€æœ‰<strong>æ–‡ä»¶å¤¹</strong>åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å¤¹ <code>plugins_handle</code> ä¸­ï¼š</p><p><img src="/posts/f2c01706/99ed706fdea36147ede5f17e9bf22459_MD5.jpeg"></p><p>å¯¹å„æ¨¡å—çš„æ–‡ä»¶å¤¹è¿›è¡Œé‡å‘½åï¼Œæ›´å¥½çœ‹äº›ï¼Œä½¿ç”¨å¦‚ä¸‹ python è„šæœ¬è¿›è¡Œé‡å‘½åï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><br><span class="hljs-comment"># è·å–å½“å‰è·¯å¾„</span><br>current_path = os.getcwd()<br><br><span class="hljs-comment"># éå†ä¸€çº§æ–‡ä»¶å¤¹</span><br><span class="hljs-keyword">for</span> folder <span class="hljs-keyword">in</span> os.listdir(current_path):<br>    <span class="hljs-keyword">if</span> os.path.isdir(folder):<br>        <span class="hljs-comment"># è·å–æ–°åç§°ï¼Œå³ç¬¬ä¸€ä¸ªä¸‹åˆ’çº¿ä¹‹å‰çš„å†…å®¹</span><br>        first_part = folder.split(<span class="hljs-string">&#x27;_&#x27;</span>)[<span class="hljs-number">0</span>]<br>        <br>        <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦éœ€è¦å¤„ç†</span><br>        <span class="hljs-keyword">if</span> first_part != <span class="hljs-string">&quot;Mem&quot;</span>:<br>            new_name = first_part<br>            <br>            <span class="hljs-comment"># æ£€æŸ¥æ–°åç§°æ˜¯å¦å·²å­˜åœ¨</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(new_name):<br>                os.rename(folder, new_name)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ–‡ä»¶å¤¹åç§°å·²æ›´æ–°ã€‚&quot;</span>)<br></code></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨æ–¹æ³•ï¼šåœ¨ä¸´æ—¶æ–‡ä»¶å¤¹ï¼ˆD:\NXP\exe\plugins_handleï¼‰ä¸­æ–°å»ºå¹¶å¤åˆ¶ä¸Šé¢ğŸ‘†ä»£ç åˆ° <code>rename.py</code> ä¸­ï¼Œç„¶åè¿è¡Œ</p></blockquote><p><img src="/posts/f2c01706/e2d1a0515f300b839b46be4e7bf066be_MD5.jpeg"></p><p>ä¸Šé¢è¿™ä¸‰ä¸ªæ–‡ä»¶å¤¹éœ€è¦æ‰‹åŠ¨é‡å‘½åä¸ºå¦‚ä¸‹ï¼ˆè„šæœ¬å·²è‡ªåŠ¨å¿½ç•¥å¤„ç†è¿™ä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼‰ï¼š</p><p><img src="/posts/f2c01706/b46beae0efcfc3a0c8a55c41c0545fcb_MD5.jpeg"></p><p>æ¥ä¸‹æ¥ï¼Œåˆ é™¤æ¯ä¸ªæ¨¡å—æ–‡ä»¶å¤¹ä¸­é™¤äº† src å’Œ include ä¹‹å¤–çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå…¶ä¸­ BaseNXPã€Platform è¿™ä¸¤ä¸ªæ¨¡å—éœ€è¦æ‰‹åŠ¨å¤„ç†ï¼Œä½¿ç”¨å¦‚ä¸‹è„šæœ¬è¿›è¡Œåˆ é™¤ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> shutil<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">clean_directories</span>(<span class="hljs-params">base_path</span>):<br>    <span class="hljs-comment"># åˆ—å‡ºå½“å‰è·¯å¾„ä¸‹çš„ä¸€çº§æ–‡ä»¶å¤¹</span><br>    <span class="hljs-keyword">for</span> folder <span class="hljs-keyword">in</span> os.listdir(base_path):<br>        folder_path = os.path.join(base_path, folder)<br><br>        <span class="hljs-comment"># åªå¤„ç†æ–‡ä»¶å¤¹ï¼Œä¸”ä¸å¤„ç†â€œBaseNXP.Baseâ€å’Œâ€œPlatformâ€</span><br>        <span class="hljs-keyword">if</span> os.path.isdir(folder_path) <span class="hljs-keyword">and</span> folder <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;BaseNXP&quot;</span>, <span class="hljs-string">&quot;Platform&quot;</span>, <span class="hljs-string">&quot;Base&quot;</span>]:<br>            <span class="hljs-comment"># éå†æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹</span><br>            <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> os.listdir(folder_path):<br>                item_path = os.path.join(folder_path, item)<br><br>                <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æ˜¯æ–‡ä»¶å¤¹ï¼Œä¸”ä¸æ˜¯â€œsrcâ€æˆ–â€œincludeâ€</span><br>                <span class="hljs-keyword">if</span> os.path.isdir(item_path) <span class="hljs-keyword">and</span> item <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;src&quot;</span>, <span class="hljs-string">&quot;include&quot;</span>]:<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;åˆ é™¤æ–‡ä»¶å¤¹: <span class="hljs-subst">&#123;item_path&#125;</span>&quot;</span>)<br>                    shutil.rmtree(item_path)  <span class="hljs-comment"># åˆ é™¤æ–‡ä»¶å¤¹</span><br><br>                <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æ˜¯æ–‡ä»¶</span><br>                <span class="hljs-keyword">elif</span> os.path.isfile(item_path):<br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;åˆ é™¤æ–‡ä»¶: <span class="hljs-subst">&#123;item_path&#125;</span>&quot;</span>)<br>                    os.remove(item_path)  <span class="hljs-comment"># åˆ é™¤æ–‡ä»¶</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    current_path = os.getcwd()  <span class="hljs-comment"># è·å–å½“å‰è·¯å¾„</span><br>    clean_directories(current_path)<br></code></pre></td></tr></table></figure><p>è„šæœ¬å·²å¿½ç•¥å¤„ç† BaseNXPã€Platform æ¨¡å—ï¼Œéœ€è¦æ‰‹åŠ¨ä¿®æ”¹ï¼š</p><p>BaseNXP ä¿ç•™å¦‚ä¸‹ä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š</p><p><img src="/posts/f2c01706/39692b62b1d6014ea21b55133a458b6c_MD5.jpeg"></p><p>Platform ä¿ç•™å¦‚ä¸‹ï¼š</p><p><img src="/posts/f2c01706/8f0e11256e196310b89e5946fce79133_MD5.jpeg"></p><blockquote><p>è¿›ä¸€æ­¥ï¼Œå…¶ä¸­ Platform&#x2F;build_files ä¸‹ä»…ä¿ç•™ gccï¼›Platform&#x2F;startup&#x2F;src&#x2F;m7 ä¸‹ä»…ä¿ç•™ gccã€exceptions.cã€startup.c</p></blockquote><p>ç„¶åï¼Œå¯¼å‡ºå„æ¨¡å—çš„ include è·¯å¾„ï¼Œä½¿ç”¨å¦‚ä¸‹è„šæœ¬ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> os<br><br><span class="hljs-comment"># ç¤ºä¾‹è·¯å¾„ï¼Œä¿ç•™&quot;&quot;</span><br>template_path = <span class="hljs-string">&#x27;&quot;$&#123;workspace_loc:/$&#123;ProjName&#125;/MCAL/DIR/include&#125;&quot;&#x27;</span><br><br><span class="hljs-comment"># å½“å‰è·¯å¾„</span><br>current_path = os.getcwd()<br><br><span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªåˆ—è¡¨æ¥å­˜å‚¨æ‰€æœ‰è·¯å¾„</span><br>paths = []<br><br><span class="hljs-comment"># éå†å½“å‰è·¯å¾„ä¸‹çš„ä¸€çº§æ–‡ä»¶å¤¹</span><br><span class="hljs-keyword">for</span> folder <span class="hljs-keyword">in</span> os.listdir(current_path):<br>    folder_path = os.path.join(current_path, folder)<br>    <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦ä¸ºæ–‡ä»¶å¤¹</span><br>    <span class="hljs-keyword">if</span> os.path.isdir(folder_path):<br>        <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦å­˜åœ¨ &#x27;include&#x27; æ–‡ä»¶å¤¹</span><br>        include_folder = os.path.join(folder_path, <span class="hljs-string">&#x27;include&#x27;</span>)<br>        <span class="hljs-keyword">if</span> os.path.exists(include_folder):<br>            <span class="hljs-comment"># å°† DIR æ›¿æ¢ä¸ºå½“å‰æ–‡ä»¶å¤¹åç§°ï¼Œä¸”ä¿ç•™&quot;&quot;</span><br>            new_path = template_path.replace(<span class="hljs-string">&#x27;DIR&#x27;</span>, folder)<br>            <span class="hljs-comment"># æ·»åŠ åˆ°è·¯å¾„åˆ—è¡¨</span><br>            paths.append(new_path)<br><br><span class="hljs-comment"># åœ¨åˆ—è¡¨å¼€å¤´æ’å…¥ä¸‰ä¸ªæ–°è·¯å¾„</span><br>paths.insert(<span class="hljs-number">0</span>, <span class="hljs-string">&#x27;&quot;$&#123;ProjDirPath&#125;/include&quot;&#x27;</span>)<br>paths.insert(<span class="hljs-number">0</span>, <span class="hljs-string">&#x27;&quot;$&#123;workspace_loc:/$&#123;ProjName&#125;/MCAL/Platform/startup/include&#125;&quot;&#x27;</span>)<br>paths.insert(<span class="hljs-number">0</span>, <span class="hljs-string">&#x27;&quot;$&#123;workspace_loc:/$&#123;ProjName&#125;/MCAL/BaseNXP/header&#125;&quot;&#x27;</span>)<br>paths.insert(<span class="hljs-number">0</span>, <span class="hljs-string">&#x27;&quot;$&#123;workspace_loc:/$&#123;ProjName&#125;/generate/include&#125;&quot;&#x27;</span>)<br><br><span class="hljs-comment"># æ‰“å¼€ path.txt æ–‡ä»¶ç”¨äºå†™å…¥</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(os.path.join(current_path, <span class="hljs-string">&#x27;path.txt&#x27;</span>), <span class="hljs-string">&#x27;w&#x27;</span>) <span class="hljs-keyword">as</span> output_file:<br>    <span class="hljs-comment"># å†™å…¥æ‰€æœ‰è·¯å¾„åˆ° path.txt</span><br>    <span class="hljs-keyword">for</span> path <span class="hljs-keyword">in</span> paths:<br>        output_file.write(path + <span class="hljs-string">&#x27;\n&#x27;</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è·¯å¾„å·²å†™å…¥åˆ° path.txt æ–‡ä»¶ã€‚&quot;</span>)<br></code></pre></td></tr></table></figure><blockquote><p>æ­¤è„šæœ¬ä¼šåœ¨å½“å‰è¿è¡Œè·¯å¾„ä¸‹ç”Ÿæˆ path.txt å­˜æ”¾å„æ¨¡å—çš„ include è·¯å¾„</p></blockquote><h2 id="2-S32DS-Project"><a href="#2-S32DS-Project" class="headerlink" title="2 S32DS Project"></a>2 S32DS Project</h2><h3 id="2-1-æ–°å»º-Project"><a href="#2-1-æ–°å»º-Project" class="headerlink" title="2.1 æ–°å»º Project"></a>2.1 æ–°å»º Project</h3><p>æ–°å»ºä¸€ä¸ªç©ºé¡¹ç›®ï¼š</p><p><img src="/posts/f2c01706/85fd1f90e5a73f9636adb37efd36d5ef_MD5.jpeg"></p><p><img src="/posts/f2c01706/0ba7ac5909654472258ec19c52927d25_MD5.jpeg"></p><p><img src="/posts/f2c01706/7a3ea107f0a98222751976c76f42dc48_MD5.jpeg"></p><p>åˆ é™¤é¡¹ç›®ä¸­çš„è¿™ä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š</p><p><img src="/posts/f2c01706/3232a9cea904dfb8f8db64c2d53f9028_MD5.jpeg"></p><p>æ–°å»ºè¿™ä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š</p><p><img src="/posts/f2c01706/b0105a880529ebe81d098669d36036c1_MD5.jpeg"></p><blockquote><p>å…¶ä¸­ï¼ŒMCAL ç”¨æ¥å­˜æ”¾ MCAL å„æ¨¡å—é©±åŠ¨çš„æºç ï¼›generate ç”¨æ¥å­˜æ”¾ EB_Tresos å·¥å…·ç”Ÿæˆçš„ä»£ç ï¼›Tresos_Project æ˜¯ EB é¡¹ç›®çš„è·¯å¾„</p></blockquote><p>å°†è¿™ä¸‰ä¸ªæ–‡ä»¶å¤¹æ·»åŠ åˆ°ç¼–è¯‘è·¯å¾„é‡Œï¼š</p><p><img src="/posts/f2c01706/87b67841a86f354cebfef69122db5ae4_MD5.jpeg"></p><p>å¤åˆ¶ä¸´æ—¶æ–‡ä»¶å¤¹ä¸­æ‰€æœ‰æ¨¡å—çš„æºç åˆ° S32DS é¡¹ç›®çš„ MCAL æ–‡ä»¶å¤¹ä¸­ï¼š</p><p><img src="/posts/f2c01706/29a2cafd2ad5e161e46e260a5179032a_MD5.jpeg"></p><h3 id="2-2-é…ç½®-Project"><a href="#2-2-é…ç½®-Project" class="headerlink" title="2.2 é…ç½® Project"></a>2.2 é…ç½® Project</h3><p>å³é”®é¡¹ç›®é€‰æ‹© Propertiesï¼š</p><p><img src="/posts/f2c01706/4636104653d97a00e58d02bc5133d149_MD5.jpeg"></p><p>æ·»åŠ å¦‚ä¸‹å®šä¹‰ï¼š</p><p><img src="/posts/f2c01706/5c6d87192e721d12df16dcf667d9dc24_MD5.jpeg"></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs txt">S32K3XX<br>AUTOSAR_OS_NOT_USE<br>S32K344<br>GCC<br>USE_SW_VECTOR_MODE<br>D_CACHE_ENABLE<br>I_CACHE_ENABLE<br>ENABLE_FPU<br></code></pre></td></tr></table></figure><p>æ·»åŠ å¤´æ–‡ä»¶ï¼Œå°†ä¸´æ—¶æ–‡ä»¶å¤¹ä¸‹ path.txt ä¸­çš„æ‰€æœ‰å†…å®¹å¤åˆ¶åˆ°æ­¤å¤„ï¼š</p><p><img src="/posts/f2c01706/a550ed853da91e9d6ba6d10e92f08195_MD5.jpeg"></p><p>é€‰æ‹©ä¼˜åŒ–é€‰é¡¹ï¼š</p><p><img src="/posts/f2c01706/df1004391b20d0dd0ba5f86819474466_MD5.jpeg"></p><p><code>-fno-short-enums -funsigned-char -fomit-frame-pointer -fstack-usage</code></p><p>é…ç½®é“¾æ¥å™¨ï¼š</p><p><img src="/posts/f2c01706/605b1abf62a5a1d19ee3518229540bd9_MD5.jpeg"></p><p><code>&quot;$&#123;workspace_loc:/$&#123;ProjName&#125;/MCAL/Platform/build_files/gcc/linker_flash_s32k344.ld&#125;&quot;</code></p><h2 id="3-EB-Tresos-Project"><a href="#3-EB-Tresos-Project" class="headerlink" title="3 EB-Tresos Project"></a>3 EB-Tresos Project</h2><p>é€‰æ‹©æ–°å»ºé¡¹ç›®ï¼š</p><p><img src="/posts/f2c01706/491a7794751838ebf8e7e059ccd2b8f2_MD5.jpeg"></p><p><img src="/posts/f2c01706/2a7b53106d6f50ad85879e59b8094e6e_MD5.jpeg"></p><p><img src="/posts/f2c01706/88c9a84e08c1f09eaec15d5bdaab8ef3_MD5.jpeg"></p><p>ä»¥å®˜æ–¹ Dio ç‚¹ç¯ä¸ºä¾‹ï¼Œæ·»åŠ å¦‚ä¸‹æ¨¡å—ï¼ˆå…·ä½“é¡¹ç›®ä¸­ä½¿ç”¨åˆ°äº†å“ªäº›æ¨¡å—å°±æ·»åŠ å“ªäº›æ¨¡å—ï¼‰<br>å‚è€ƒå®˜æ–¹ç¤ºä¾‹ä»£ç ï¼Œåœ¨å·²å®‰è£…çš„ MCAL è·¯å¾„ä¸‹: <code>SW32K3_RTD_R21-11_4.0.0_HF_02\eclipse\plugins\Dio_TS_T40D34M40I0R0\examples\EBT\S32K3XX\Dio_Example_S32K344\TresosProject\Dio_Example_S32K344</code></p><p><img src="/posts/f2c01706/15a69ffd7b1ed7c9d2383e44e2d1bf61_MD5.jpeg"></p><p>å¤åˆ¶ <code>SW32K3_RTD_R21-11_4.0.0_HF_02\eclipse\plugins\Dio_TS_T40D34M40I0R0\examples\EBT\S32K3XX\Dio_Example_S32K344\TresosProject\Dio_Example_S32K344</code> è·¯å¾„ä¸‹ config æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ° S32DS é¡¹ç›® Tresos_Project ä¸‹çš„ config ä¸­ï¼ˆè¦†ç›–åŸæ–‡ä»¶ï¼‰</p><p>ç„¶ååœ¨ EB ä¸­ç”Ÿæˆä»£ç ï¼š</p><p><img src="/posts/f2c01706/16333f2b8d669a8b7f798f9ec8ead34f_MD5.jpeg"></p><p>æ­¤æ—¶ï¼Œåˆ·æ–° S32DS å generate ä¸‹å°±æœ‰ç”Ÿæˆçš„ä»£ç äº†ï¼š</p><p><img src="/posts/f2c01706/c4b6688882afeda620e3b9aa1d617b9a_MD5.jpeg"></p><h2 id="4-ç¼–è¯‘"><a href="#4-ç¼–è¯‘" class="headerlink" title="4 ç¼–è¯‘"></a>4 ç¼–è¯‘</h2><p>å¤åˆ¶ Dio ç¤ºä¾‹ä»£ç  <code>D:\NXP\exe\SW32K3_RTD_R21-11_4.0.0_HF_02\eclipse\plugins\Dio_TS_T40D34M40I0R0\examples\EBT\S32K3XX\Dio_Example_S32K344\src</code> ä¸‹çš„ main.c æ›¿æ¢ S32DS é¡¹ç›®ä¸‹ src ä¸­çš„ mian.c ï¼›<br>å¹¶ä¸”æ³¨é‡Šæ‰ <code>#include &quot;check_example.h&quot;</code>ã€<code>Exit_Example(TRUE);</code></p><p><img src="/posts/f2c01706/3a907d3bf486b795032c937036e248e3_MD5.jpeg"></p><p><img src="/posts/f2c01706/f1af8bdd5b158de26f2ec4216641dd09_MD5.jpeg"></p><p>å…ˆå°† S32DS é¡¹ç›®ä¸‹ MCAL ä¸­çš„æ‰€æœ‰æ¨¡å—ç§»é™¤ç¼–è¯‘è·¯å¾„ï¼š</p><p><img src="/posts/f2c01706/99dd74ca2831cc07b9196a1828b51812_MD5.jpeg"></p><p>æ ¹æ® Dio å®˜æ–¹ç¤ºä¾‹æ·»åŠ æ‰€éœ€çš„æ¨¡å—åˆ°ç¼–è¯‘è·¯å¾„ï¼š</p><p><img src="/posts/f2c01706/15a69ffd7b1ed7c9d2383e44e2d1bf61_MD5.jpeg"></p><p><img src="/posts/f2c01706/ce8419e389353a0f21bcf9b4166f2dec_MD5.jpeg"></p><p>æ¥ä¸‹æ¥ï¼Œå°±æ˜¯ç¼–è¯‘å¤„ç†æŠ¥é”™ï¼š</p><p><img src="/posts/f2c01706/53876be4657bbf83688faa00a681ccab_MD5.jpeg"></p><p>æ­¤å¤„æŠ¥é”™è¯´æ‰¾ä¸åˆ°è¿™ä¸ª <code>SchM_Enter_Dio_DIO_EXCLUSIVE_AREA_01</code></p><p>ä¸ºäº†æ–¹ä¾¿æœç´¢ï¼Œç”¨ VSCode æ‰“å¼€è¿™ä¸ª S32DS é¡¹ç›®ï¼š</p><p><img src="/posts/f2c01706/406ea2deef38c6b05d20b6b32972ee3f_MD5.jpeg"></p><p>åœ¨ VSCode ä¸­æœç´¢ <code>SchM_Enter_Dio_DIO_EXCLUSIVE_AREA_01</code>ï¼š</p><p><img src="/posts/f2c01706/bf985a4025126251509133e15280c70e_MD5.jpeg"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>MCAL\Dio\src\Siul2_Dio_Ip.c</code> è°ƒç”¨äº† <code>SchM_Enter_Dio_DIO_EXCLUSIVE_AREA_01</code> å‡½æ•°ï¼Œå…¶å‡½æ•°çš„å®šä¹‰æ˜¯åœ¨ MCAL çš„ Rte æ¨¡å—ä¸­ã€‚é‚£ä¹ˆå°±æ·»åŠ  MCAL&#x2F;Rte åˆ°ç¼–è¯‘è·¯å¾„ä¸­ï¼š</p><p><img src="/posts/f2c01706/8c34ca8429429e7259bee73ee5d19fc2_MD5.jpeg"></p><p>å†æ¬¡ç¼–è¯‘ï¼š</p><p><img src="/posts/f2c01706/3a55d3dfb95fa05fb10f53db3cca6bbd_MD5.jpeg"></p><p>æ˜¾ç„¶ï¼Œéœ€è¦æ·»åŠ  MCAL&#x2F;Det æ¨¡å—åˆ°ç¼–è¯‘è·¯å¾„ä¸­ï¼š</p><p><img src="/posts/f2c01706/078e0c3678b8e1452593326966d0ca07_MD5.jpeg"></p><p>å†æ¬¡ç¼–è¯‘ï¼Œæ²¡æœ‰é”™è¯¯äº†ï¼š</p><p><img src="/posts/f2c01706/a07081cb66de3d14da6f133dbdfb2baf_MD5.jpeg"></p><p>çƒ§å½•æµ‹è¯•åï¼ŒLED æ­£å¸¸é—ªçƒï¼</p>]]></content>
    
    
    <categories>
      
      <category>MCU</category>
      
    </categories>
    
    
    <tags>
      
      <tag>S32DS</tag>
      
      <tag>EB_Tresos</tag>
      
      <tag>MCAL</tag>
      
      <tag>Autosar</tag>
      
      <tag>S32K344</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ ‘è“æ´¾5-LED-Platformé©±åŠ¨</title>
    <link href="/posts/bcdde5bf/"/>
    <url>/posts/bcdde5bf/</url>
    
    <content type="html"><![CDATA[<h2 id="1-é€‰æ‹©-GPIO-å¼•è„š"><a href="#1-é€‰æ‹©-GPIO-å¼•è„š" class="headerlink" title="1 é€‰æ‹© GPIO å¼•è„š"></a>1 é€‰æ‹© GPIO å¼•è„š</h2><p>åœ¨æ ‘è“æ´¾çš„æ‰©å±•å£ä¸­ä»¥ <a href="https://pinout.xyz/pinout/pin11_gpio17/">GPIO17</a> ä¸ºä¾‹ï¼Œç‚¹äº® LED ç¯ã€‚</p><p><img src="/posts/bcdde5bf/686d5a50e65e8be9d3068fa4c00c26cf_MD5.jpeg"></p><p>GPIO17 ä»‹ç»ï¼š</p><p><img src="/posts/bcdde5bf/a98d4024377461eb5bd55f6bcb4e7248_MD5.jpeg"></p><h2 id="2-é…ç½®è®¾å¤‡æ ‘-dts"><a href="#2-é…ç½®è®¾å¤‡æ ‘-dts" class="headerlink" title="2 é…ç½®è®¾å¤‡æ ‘ dts"></a>2 é…ç½®è®¾å¤‡æ ‘ dts</h2><p>æ ‘è“æ´¾5 çš„è®¾å¤‡æ ‘æ–‡ä»¶æ˜¯ <code>arch/arm64/boot/dts/broadcom/bcm2712-rpi-5-b.dts</code> :</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;arm/broadcom/bcm2712-rpi-5-b.dts&quot;</span></span><br></code></pre></td></tr></table></figure><p>å› ä¸ºåŒ…å«äº† arm ä¸‹çš„ dtsï¼Œæ‰€ä»¥ä¿®æ”¹ <code>arch/arm/boot/dts/broadcom/bcm2712-rpi-5-b.dts</code>ï¼Œæ·»åŠ  jw_led èŠ‚ç‚¹ï¼š</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-title class_">/</span> <span class="hljs-punctuation">&#123;</span><br>...<br><span class="hljs-symbol">led:</span> <span class="hljs-title class_">leds</span> <span class="hljs-punctuation">&#123;</span><br>...<br><span class="hljs-punctuation">&#125;;</span><br><span class="hljs-comment">//åœ¨æ­¤å¤„æ·»åŠ  jw_led èŠ‚ç‚¹</span><br><span class="hljs-symbol">jw_led:</span> <span class="hljs-title class_">jw_gpio17</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-punctuation">&#125;;</span><br>...<br><span class="hljs-punctuation">&#125;;</span><br>...<br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;rp1.dtsi&quot;</span></span><br>...<br><span class="hljs-symbol">gpio:</span> <span class="hljs-variable">&amp;rp1_gpio</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">status</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;okay&quot;</span><span class="hljs-punctuation">;</span><br><span class="hljs-punctuation">&#125;;</span><br><span class="hljs-comment">//åœ¨æ­¤å¤„å¼•ç”¨ä¿®æ”¹ jw_led èŠ‚ç‚¹</span><br><span class="hljs-variable">&amp;jw_led</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">compatible</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jw,jwled369&quot;</span><span class="hljs-punctuation">;</span><br><span class="hljs-attr">led-gpios</span> <span class="hljs-operator">=</span> <span class="hljs-params">&lt;<span class="hljs-variable">&amp;gpio</span> <span class="hljs-number">17</span> GPIO_ACTIVE_HIGH&gt;</span><span class="hljs-punctuation">;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>å…³äº rp1 èŠ¯ç‰‡é˜…è¯»å®˜æ–¹çš„æ•°æ®æ‰‹å†Œã€‚</p><h2 id="3-ç¼–å†™-Platform-é©±åŠ¨"><a href="#3-ç¼–å†™-Platform-é©±åŠ¨" class="headerlink" title="3 ç¼–å†™ Platform é©±åŠ¨"></a>3 ç¼–å†™ Platform é©±åŠ¨</h2><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;linux/of.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;linux/gpio/consumer.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;linux/platform_device.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;linux/module.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> DRIVER_NAME <span class="hljs-string">&quot;jw_led&quot;</span></span><br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">jw_led</span> &#123;</span><br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">gpio_desc</span> *<span class="hljs-title">gpio</span>;</span><br>&#125;;<br><br><span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">jw_led_probe</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> platform_device *pdev)</span><br>&#123;<br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">jw_led</span> *<span class="hljs-title">led</span>;</span><br><br>    led = devm_kzalloc(&amp;pdev-&gt;dev, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">struct</span> jw_led), GFP_KERNEL);<br>    <span class="hljs-keyword">if</span> (!led)<br>        <span class="hljs-keyword">return</span> -ENOMEM;<br><br>    platform_set_drvdata(pdev, led);<br><br>    led-&gt;gpio = devm_gpiod_get_index(&amp;pdev-&gt;dev, <span class="hljs-string">&quot;led&quot;</span>, <span class="hljs-number">0</span>, GPIOD_OUT_LOW);<br>    <span class="hljs-keyword">if</span> (IS_ERR(led-&gt;gpio)) &#123;<br>        dev_err(&amp;pdev-&gt;dev, <span class="hljs-string">&quot;Failed to get jw_led/led-gpios property: %ld\n&quot;</span>,<br>                PTR_ERR(led-&gt;gpio));<br>        <span class="hljs-keyword">return</span> PTR_ERR(led-&gt;gpio);<br>    &#125;<br><br>    <span class="hljs-comment">/* åœ¨è¿™é‡Œå¯ä»¥æ·»åŠ å…¶ä»–ä»£ç æ¥æ§åˆ¶ GPIO17 */</span><br>    <span class="hljs-comment">// gpiod_set_value(led-&gt;gpio, 1);</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-type">static</span> <span class="hljs-type">const</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">of_device_id</span> <span class="hljs-title">jw_led_of_match</span>[] =</span> &#123;<br>    &#123; .compatible = <span class="hljs-string">&quot;jw,jwled369&quot;</span>, &#125;,<br>    &#123; <span class="hljs-comment">/* end of list */</span> &#125;,<br>&#125;;<br>MODULE_DEVICE_TABLE(of, jw_led_of_match);<br><br><span class="hljs-type">static</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">platform_driver</span> <span class="hljs-title">jw_led_driver</span> =</span> &#123;<br>    .probe = jw_led_probe,<br>    .driver = &#123;<br>        .name = DRIVER_NAME,<br>        .of_match_table = jw_led_of_match,<br>    &#125;,<br>&#125;;<br>module_platform_driver(jw_led_driver);<br><br>MODULE_AUTHOR(<span class="hljs-string">&quot;jw.lee&quot;</span>);<br>MODULE_DESCRIPTION(<span class="hljs-string">&quot;LED driver&quot;</span>);<br>MODULE_LICENSE(<span class="hljs-string">&quot;GPL v2&quot;</span>);<br></code></pre></td></tr></table></figure><p>æœ€åï¼Œç¼–è¯‘æˆæ¨¡å—åœ¨æ ‘è“æ´¾ä¸Š insmod å³å¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ ‘è“æ´¾é©±åŠ¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>platform</tag>
      
      <tag>gpio</tag>
      
      <tag>dts</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vscodeã€Clangdã€RemoteSSHâ€”â€”ç¯å¢ƒé…ç½®</title>
    <link href="/posts/af2bf757/"/>
    <url>/posts/af2bf757/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ä½¿ç”¨åœºæ™¯ï¼šWindows ç«¯ Vscode ä½¿ç”¨ RemoteSSH æ’ä»¶è¿œç¨‹è¿æ¥åˆ° fedora ç³»ç»Ÿï¼Œå¹¶ä¸”é¡¹ç›®æºç æ˜¯åœ¨ fedora ä¸Šã€‚</p></blockquote><h2 id="1-å®‰è£…-bear"><a href="#1-å®‰è£…-bear" class="headerlink" title="1 å®‰è£… bear"></a>1 å®‰è£… bear</h2><p><code>sudo dnf install bear</code></p><p><img src="/posts/af2bf757/7c7eb2ee8ae3d4cb5f21a19fc1085371_MD5.jpeg"></p><h2 id="2-å®‰è£…-clangã€clangd"><a href="#2-å®‰è£…-clangã€clangd" class="headerlink" title="2 å®‰è£… clangã€clangd"></a>2 å®‰è£… clangã€clangd</h2><p><code>sudo dnf install clang</code></p><p><code>sudo dnf install clang-tools-extra</code></p><p><img src="/posts/af2bf757/9b3d43fdbf79395f56ea1a63d0976da1_MD5.jpeg"></p><h2 id="3-é…ç½®-VScode-Clangd-æ’ä»¶"><a href="#3-é…ç½®-VScode-Clangd-æ’ä»¶" class="headerlink" title="3 é…ç½® VScode Clangd æ’ä»¶"></a>3 é…ç½® VScode Clangd æ’ä»¶</h2><blockquote><p>éœ€è¦å…ˆå°† VScode ä¸­çš„æ‰€æœ‰ C&#x2F;C++ æ’ä»¶ç¦ç”¨æˆ–å¸è½½</p></blockquote><p>åœ¨ VScode çš„æ’ä»¶é‡Œé¢æœç´¢ â€œClangdâ€ å¹¶ä¸”å®‰è£…ã€‚</p><p>å®‰è£…å®Œæ¯•åï¼Œæ‰“å¼€ VScode è®¾ç½®ï¼š</p><p><img src="/posts/af2bf757/911d5ef43a63ee4d32ac535e675f78c1_MD5.jpeg"></p><p>æˆ‘æ˜¯åœ¨è¿œç¨‹ä¸­è®¾ç½®çš„ï¼Œæ‰“å¼€è¿œç¨‹çš„ settings. json æ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;clangd.path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/usr/bin/clangd&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;clangd.arguments&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-string">&quot;--background-index&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-string">&quot;--compile-commands-dir=/home/jw/develop/linux&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-string">&quot;-j=4&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-string">&quot;--query-driver=/usr/bin/aarch64-linux-gnu-gcc&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-string">&quot;--clang-tidy&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-string">&quot;--clang-tidy-checks=performance-*,bugprone-*&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-string">&quot;--all-scopes-completion&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-string">&quot;--completion-style=detailed&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-string">&quot;--header-insertion=iwyu&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-string">&quot;--pch-storage=disk&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-string">&quot;--compile-commands-dir=$&#123;workspaceFolder&#125;&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-string">&quot;--background-index&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-string">&quot;--completion-style=detailed&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-string">&quot;--header-insertion=never&quot;</span><br>    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;clangd.fallbackFlags&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-string">&quot;-I/home/jw/develop/linux/include&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-string">&quot;-I/home/jw/develop/linux/arch/arm64/include&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-string">&quot;-I/home/jw/develop/linux/arch/arm64/include/generated/&quot;</span><br>    <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><ul><li>â€œclangd.pathâ€ ä½¿ç”¨ <code>which clangd</code> å‘½ä»¤æŸ¥çœ‹ï¼š<img src="/posts/af2bf757/878188bbfc108b4d84d3c3e79ceded27_MD5.jpeg"></li><li>â€œclangd.argumentsâ€ çš„ â€“compile-commands-dir å¡«ä½ çš„é¡¹ç›®æºç æ ¹ç›®å½•</li><li>â€œclangd.argumentsâ€ çš„ â€“query-driver å¡«äº¤å‰ç¼–è¯‘å™¨è·¯å¾„</li><li>â€œclangd.fallbackFlagsâ€ ä¸­ <code>/home/jw/develop/linux</code> æ›¿æ¢æˆä½ çš„é¡¹ç›®è·¯å¾„</li><li>â€œclangd.fallbackFlagsâ€ ä¸­ <code>arch/arm64/include</code> ã€<code>arch/arm64/include/generated/</code> ä½¿ç”¨ arm64 æ¶æ„ï¼Œæ ¹æ®è‡ªå·±çš„å¼€å‘æ¿æ¶æ„æ¥</li></ul><h2 id="4-ç¼–è¯‘é¡¹ç›®ç”Ÿæˆ-compile-commands-json-æ–‡ä»¶"><a href="#4-ç¼–è¯‘é¡¹ç›®ç”Ÿæˆ-compile-commands-json-æ–‡ä»¶" class="headerlink" title="4 ç¼–è¯‘é¡¹ç›®ç”Ÿæˆ compile_commands.json æ–‡ä»¶"></a>4 ç¼–è¯‘é¡¹ç›®ç”Ÿæˆ <code>compile_commands.json</code> æ–‡ä»¶</h2><p>é‡æ–°ç¼–è¯‘ kernel é•œåƒï¼Œå…ˆ clean é¡¹ç›®å†ç¼–è¯‘ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">make distclean<br>make bcm2712_defconfig    //æ ¹æ®ä½ çš„å¼€å‘æ¿è€Œå®š<br>bear -- make Image -j8    //Imageã€zImageè¿˜æ˜¯uImageæ ¹æ®ä½ çš„å¼€å‘æ¿è€Œå®š<br></code></pre></td></tr></table></figure><p>ç¼–è¯‘å®Œåä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ç”Ÿæˆ <code>compile_commands.json</code> æ–‡ä»¶ï¼š</p><p><img src="/posts/af2bf757/e66215266218dbfc3e0ae4402749022f_MD5.jpeg"></p><p>å°†æ‰€æœ‰çš„ <code>/usr/bin/gcc</code> æ›¿æ¢æˆä½ çš„äº¤å‰ç¼–è¯‘å™¨ï¼Œæˆ‘çš„æ˜¯ <code>/usr/bin/aarch64-linux-gnu-gcc</code> VIM ä¸­ä½¿ç”¨ <code>:%s#/usr/bin/gcc#/usr/bin/aarch64-linux-gnu-gcc#g</code> å‘½ä»¤æ›¿æ¢ã€‚</p><h3 id="4-1-åˆ›å»º-clangd-æ–‡ä»¶"><a href="#4-1-åˆ›å»º-clangd-æ–‡ä»¶" class="headerlink" title="4.1 åˆ›å»º .clangd æ–‡ä»¶"></a>4.1 åˆ›å»º <code>.clangd</code> æ–‡ä»¶</h3><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º <code>.clangd</code> æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs txt">CompileFlags:<br>    Add:<br>        [-I, &quot;/usr/include&quot;]<br>    Remove: <br>        [<br>            -fno-allow-store-data-races,<br>            -fconserve-stack,<br>            -mabi=lp64<br>        ]<br></code></pre></td></tr></table></figure><p>å…¶ä¸­çš„ Remove æ˜¯ä¸ºäº†å¿½ç•¥ gcc å’Œ clang ç¼–è¯‘å™¨ä¸å…¼å®¹è€Œå‡ºç°çš„é”™è¯¯ã€‚</p><h2 id="5-VScode-æ‰“å¼€é¡¹ç›®"><a href="#5-VScode-æ‰“å¼€é¡¹ç›®" class="headerlink" title="5 VScode æ‰“å¼€é¡¹ç›®"></a>5 VScode æ‰“å¼€é¡¹ç›®</h2><p>ä½¿ç”¨ VScode æ‰“å¼€é¡¹ç›®ï¼š</p><p><img src="/posts/af2bf757/77b2fe94fef24678a77591234969a3f5_MD5.jpeg"></p><p>okï¼Œæ­¤æ—¶å°±å¯ä»¥ä»£ç æç¤ºå’Œè¡¥å…¨äº†ï¼</p><h3 id="5-1-å¤„ç†ä¸€äº›é—®é¢˜"><a href="#5-1-å¤„ç†ä¸€äº›é—®é¢˜" class="headerlink" title="5.1 å¤„ç†ä¸€äº›é—®é¢˜"></a>5.1 å¤„ç†ä¸€äº›é—®é¢˜</h3><p>å¦‚æœé…ç½®åä¸èµ·æ•ˆï¼Œå¯ä»¥åœ¨ clangd çš„ log ä¸­æŸ¥çœ‹å“ªé‡Œçš„é—®é¢˜ï¼š</p><p><img src="/posts/af2bf757/f195d476a19cf7c2c9d44011984dc37f_MD5.jpeg"></p><p><img src="/posts/af2bf757/42df14c724748d944e53139e38785f60_MD5.jpeg"></p><p>å…·ä½“çš„é—®é¢˜å¯ä»¥åœ¨ç½‘ä¸Šæœç´¢ä¸‹ã€‚</p><blockquote><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://blog.csdn.net/Telly_/article/details/134289358">VSCode ä½¿ç”¨ clangd æ„å»º Linux é©±åŠ¨å¼€å‘ç¯å¢ƒ</a>ã€<a href="https://blog.csdn.net/zhanzheng520/article/details/135103043">clangd: Couldnâ€˜t build compiler instance</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>DIY</category>
      
    </categories>
    
    
    <tags>
      
      <tag>clangd</tag>
      
      <tag>lsp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>gccå­¦ä¹ ç¬”è®°2</title>
    <link href="/posts/d7382070/"/>
    <url>/posts/d7382070/</url>
    
    <content type="html"><![CDATA[<p>å¾…æ›´æ–°</p>]]></content>
    
    
    <categories>
      
      <category>gccå­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>GNU</tag>
      
      <tag>GCC</tag>
      
      <tag>C</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¸¸ç”¨è½¯ä»¶å®‰è£…é…ç½®</title>
    <link href="/posts/28f0e3d2/"/>
    <url>/posts/28f0e3d2/</url>
    
    <content type="html"><![CDATA[<h2 id="1-Node-js-å®‰è£…é…ç½®"><a href="#1-Node-js-å®‰è£…é…ç½®" class="headerlink" title="1 Node. js å®‰è£…é…ç½®"></a>1 Node. js å®‰è£…é…ç½®</h2><ol><li>ä» node. js å®˜ç½‘ä¸‹è½½ Linux ç‰ˆçš„ tar. xz æ–‡ä»¶</li><li>è§£å‹ <code>tar -xJf node-v20.10.0-linux-x64.tar.xz</code></li><li>é‡å‘½å <code>mv node-v20.10.0-linux-x64 node_js</code></li><li>ç§»åŠ¨åˆ° <code>/usr/local</code> è·¯å¾„ä¸‹ <code>sudo mv ~/Downloads/node_js /usr/local/</code></li><li>å»ºç«‹è½¯é“¾æ¥ï¼š<ul><li><code>sudo ln -s /usr/local/node_js/bin/node /usr/local/bin/</code></li><li><code>sudo ln -s /usr/local/node_js/bin/npm /usr/local/bin/</code></li></ul></li><li>ç¼–è¾‘ç¯å¢ƒå˜é‡ï¼š<br>åœ¨ <code>/etc/profile</code> æœ«å°¾æ·»åŠ ï¼š<ul><li><code>export NODE_HOME=/usr/local/node_js</code></li><li><code>export PATH=$NODE_HOME/bin:$PATH</code></li></ul></li><li>åˆ·æ–°ç¯å¢ƒå˜é‡ <code>source /etc/profile</code></li><li>æ¢æ·˜å®æº <code>npm config set registry https://registry.npmmirror.com</code> æˆ–è…¾è®¯æº <code>npm config set registry http://mirrors.cloud.tencent.com/npm</code></li></ol><h2 id="2-Fedora-é…ç½®"><a href="#2-Fedora-é…ç½®" class="headerlink" title="2 Fedora é…ç½®"></a>2 Fedora é…ç½®</h2><h3 id="2-1-Fedora-æ¢æº"><a href="#2-1-Fedora-æ¢æº" class="headerlink" title="2.1 Fedora æ¢æº"></a>2.1 Fedora æ¢æº</h3><ul><li><code>sudo mkdir -p /etc/yum.repos.d/backup</code></li><li><code>sudo cp -rfp /etc/yum.repos.d/fedora.repo /etc/yum.repos.d/fedora-updates.repo /etc/yum.repos.d/backup</code></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo sed -e &#x27;s|^metalink=|#metalink=|g&#x27; \<br>         -e &#x27;s|^#baseurl=http://download.example/pub/fedora/linux|baseurl=https://mirrors.ustc.edu.cn/fedora|g&#x27; \<br>         -i.bak \<br>         /etc/yum.repos.d/fedora.repo \<br>         /etc/yum.repos.d/fedora-updates.repo<br></code></pre></td></tr></table></figure><ul><li><code>sudo dnf clean all</code></li><li><code>sudo dnf makecache</code></li></ul><h3 id="2-2-Fedora-æ¢-RPM-Fusion-æº"><a href="#2-2-Fedora-æ¢-RPM-Fusion-æº" class="headerlink" title="2.2 Fedora æ¢ RPM Fusion æº"></a>2.2 Fedora æ¢ RPM Fusion æº</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo dnf install https://mirrors.ustc.edu.cn/rpmfusion/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://mirrors.ustc.edu.cn/rpmfusion/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm<br></code></pre></td></tr></table></figure><h3 id="2-3-Gnome-æ¡Œé¢ä¼˜åŒ–"><a href="#2-3-Gnome-æ¡Œé¢ä¼˜åŒ–" class="headerlink" title="2.3 Gnome æ¡Œé¢ä¼˜åŒ–"></a>2.3 Gnome æ¡Œé¢ä¼˜åŒ–</h3><ul><li><code>sudo dnf install gnome-tweaks gnome-extensions-app</code></li></ul><blockquote><p><a href="https://fjqz177.top/posts/9/">å¼•ç”¨æ–‡ç« </a></p></blockquote><h2 id="3-Raspberry-Pi"><a href="#3-Raspberry-Pi" class="headerlink" title="3 Raspberry Pi"></a>3 Raspberry Pi</h2><h3 id="3-1-æ ‘è“æ´¾-UART-è¿æ¥"><a href="#3-1-æ ‘è“æ´¾-UART-è¿æ¥" class="headerlink" title="3.1 æ ‘è“æ´¾ UART è¿æ¥"></a>3.1 æ ‘è“æ´¾ UART è¿æ¥</h3><p>æ ‘è“æ´¾è‡ªå¸¦çš„ UART é’ˆè„šå›¾ï¼š</p><p><img src="/posts/28f0e3d2/e85f34a0ba92a9c9510a503ba7aa6527_MD5.jpeg"></p><h3 id="3-2-ä½¿ç”¨å‘½ä»¤è¿æ¥-WIFI"><a href="#3-2-ä½¿ç”¨å‘½ä»¤è¿æ¥-WIFI" class="headerlink" title="3.2 ä½¿ç”¨å‘½ä»¤è¿æ¥ WIFI"></a>3.2 ä½¿ç”¨å‘½ä»¤è¿æ¥ WIFI</h3><p>ä½¿ç”¨ UART è¿æ¥åˆ°æ ‘è“æ´¾å¹¶ç™»å½•è¿›ç³»ç»Ÿã€‚</p><p>ä½¿ç”¨ <code>sudo nmcli dev wifi list</code> å‘½ä»¤æŸ¥çœ‹ wifi åˆ—è¡¨ï¼ˆå‰ææ ‘è“æ´¾çš„ WiFi åŠŸèƒ½å·²å¯ç”¨ï¼Œå¦‚æœæœªå¯ç”¨ä½¿ç”¨ <code>sudo raspi-config</code> è¿›è¡Œé…ç½®ï¼‰ã€‚</p><p><img src="/posts/28f0e3d2/dd34d0739b45cf7c2a5cf805866517d1_MD5.jpeg"></p><p><code>sudo nmcli dev wifi connect WiFi_name password WiFi_pwd</code> è¿æ¥ WiFiï¼Œä¾‹å¦‚ <code>sudo nmcli dev wifi connect ChinaNet_ABCD password 12345678</code> ï¼Œç¨ç­‰ç‰‡åˆ»ï¼Œè¿æ¥æˆåŠŸï¼</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>gccå­¦ä¹ ç¬”è®°1</title>
    <link href="/posts/4e3171ca/"/>
    <url>/posts/4e3171ca/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ­¤æ–‡ç« æ˜¯ gcc å­¦ä¹ ç¬”è®°ï¼Œ<a href="https://www.bilibili.com/video/BV1Y8411M7fp/?p=3&spm_id_from=pageDriver&vd_source=d28f6fad4261fe5abca485f4a556dbc1">å­¦ä¹ è§†é¢‘</a></p></blockquote><h2 id="1-å¤šæ–‡ä»¶ç¼–è¯‘"><a href="#1-å¤šæ–‡ä»¶ç¼–è¯‘" class="headerlink" title="1 å¤šæ–‡ä»¶ç¼–è¯‘"></a>1 å¤šæ–‡ä»¶ç¼–è¯‘</h2><p>ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="/posts/4e3171ca/fc81ec4f3b390a718d9f921c56e31774_MD5.jpeg"></p><p><code>main.c</code>ï¼ˆä¸»ç¨‹åºï¼‰ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;hello.h&quot;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>        hello(<span class="hljs-string">&quot;å‘µå‘µï¼Œojbk&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>hello.h</code>ï¼ˆå‡½æ•°çš„å£°æ˜ï¼‰ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span> <span class="hljs-title function_">hello</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* str)</span>;<br></code></pre></td></tr></table></figure><p><code>hello.c</code>ï¼ˆå‡½æ•°çš„å®ç°ï¼‰ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;hello.h&quot;</span></span><br><span class="hljs-type">void</span> <span class="hljs-title function_">hello</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* str)</span><br>&#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>, str);<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>gcc -Wall main.c hello.c -o hehe</code> å‘½ä»¤è¿›è¡Œå¤šæ–‡ä»¶ç¼–è¯‘ï¼š</p><p><img src="/posts/4e3171ca/8af5eedd71c05782187f5b0b01ad29ca_MD5.jpeg"></p><h3 id="1-1-hello-h"><a href="#1-1-hello-h" class="headerlink" title="1.1 hello.h"></a>1.1 <code>hello.h</code></h3><p>åœ¨æ–‡ä»¶ç›®å½•ä¸­æœ‰ <code>hello.c</code>ã€<code>hello.h</code> å’Œ <code>main.c</code>ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨ <code>gcc</code> ç¼–è¯‘æ—¶æ²¡æœ‰åŒ…å« <code>hello.h</code></p><p>åœ¨ <code>main.c</code> ä¸­çš„ç¬¬äºŒè¡Œ include äº† <code>hello.h</code>ï¼Œ<code>gcc -Wall main.c hello.c -o hehe</code> åœ¨æ‰§è¡Œè¿™æ¡å‘½ä»¤æ—¶ï¼Œgcc è¯»å–åˆ° <code>main.c</code> æºæ–‡ä»¶ä¸­çš„ç¬¬äºŒè¡Œï¼Œå°±ä¼šå»æ‰¾ <code>hello.h</code> æ–‡ä»¶è‡ªåŠ¨åŒ…å«è¿›æ¥ï¼Œæ‰€ä»¥ä¸ç”¨åŒ…å«å¤´æ–‡ä»¶ã€‚</p><h4 id="1-1-1-å’Œ"><a href="#1-1-1-å’Œ" class="headerlink" title="1.1.1 &quot; &quot; å’Œ &lt; &gt;"></a>1.1.1 <code>&quot; &quot;</code> å’Œ <code>&lt; &gt;</code></h4><p>åœ¨ <code>main.c</code> ä¸­ä½¿ç”¨äº† <code>include &lt;stdio.h&gt;</code> å’Œ <code>include &quot;hello.h&quot;</code>ï¼Œè¿™ä¸¤ç§ä¸åŒçš„åŒ…å«ç¬¦å·æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p><code>&quot; &quot;</code> è¡¨ç¤ºç¼–è¯‘å™¨é¦–å…ˆä¼šåˆ°å½“å‰è·¯å¾„ï¼ˆè¢«ç¼–è¯‘çš„æºæ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ï¼‰ä¸‹æœç´¢è¿™ä¸ªå¤´æ–‡ä»¶ï¼Œæ‰¾ä¸åˆ°å†å»<strong>ç³»ç»Ÿå¤´æ–‡ä»¶ç›®å½•</strong>ã€‚</p><p>è€Œ <code>&lt; &gt;</code> æ˜¯ç›´æ¥å»<strong>ç³»ç»Ÿå¤´æ–‡ä»¶ç›®å½•</strong>ä¸‹æœç´¢å¤´æ–‡ä»¶ã€‚</p><blockquote><p>å¤´æ–‡ä»¶ç›®å½•ï¼ˆå¯¹äº Linux ç³»ç»Ÿï¼‰<br>&#x2F;usr&#x2F;includeï¼šç³»ç»Ÿä¸Šçš„æ ‡å‡†å¤´æ–‡ä»¶ç›®å½•<br>&#x2F;usr&#x2F;local&#x2F;include: æœ¬åœ°å®‰è£…çš„è½¯ä»¶åŒ…å¯èƒ½ä¼šå°†å¤´æ–‡ä»¶æ”¾ç½®åœ¨è¿™ä¸ªç›®å½•ä¸­</p></blockquote><h3 id="1-2-å¦å¤–"><a href="#1-2-å¦å¤–" class="headerlink" title="1.2 å¦å¤–"></a>1.2 å¦å¤–</h3><p>åœ¨ä¸Šè¿°æºæ–‡ä»¶ä¸­ï¼Œ<code>hello.c</code> ä¸­çš„ <code>include &quot;hello.h&quot;</code> å¯ä»¥åˆ é™¤ï¼Œä½¿ç”¨ <code>gcc -Wall main.c hello.c -o hehe</code> ç¼–è¯‘æ—¶æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</p><p>å½“ <code>main.c</code> ä¸­åŒ…å«äº† <code>hello.h</code> å¤´æ–‡ä»¶æ—¶ï¼Œè¿™ä¸ªå¤´æ–‡ä»¶ä¸­çš„å£°æ˜ <code>void hello(const char* str);</code> å‘Šè¯‰ç¼–è¯‘å™¨æœ‰ä¸€ä¸ªåä¸º <code>hello</code> çš„å‡½æ•°ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æä¾›è¯¥å‡½æ•°çš„å…·ä½“å®ç°ã€‚å…·ä½“çš„å®ç°åœ¨ <code>hello.c</code> æ–‡ä»¶ä¸­ã€‚</p><p>ç¼–è¯‘å™¨åœ¨ç¼–è¯‘ <code>main.c</code> æ—¶ï¼Œä¼šæŸ¥çœ‹ <code>#include &quot;hello.h&quot;</code>ï¼Œè¿™ä¼šå°† <code>hello.h</code> æ–‡ä»¶çš„å†…å®¹æ’å…¥åˆ° <code>main.c</code> ä¸­ã€‚ç„¶åç¼–è¯‘å™¨ä¼šåœ¨ <code>main.c</code> ä¸­æ‰¾åˆ°å‡½æ•°å£°æ˜ <code>void hello(const char* str);</code>ã€‚ç”±äºè¿™åªæ˜¯ä¸€ä¸ªå£°æ˜ï¼Œç¼–è¯‘å™¨å¹¶ä¸çŸ¥é“å‡½æ•°çš„å…·ä½“å®ç°ã€‚</p><p><strong>å½“ä½ æœ€åæ‰§è¡Œé“¾æ¥é˜¶æ®µï¼ˆä½¿ç”¨ <code>gcc main.c hello.c -o hello</code>ï¼‰æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæŸ¥æ‰¾ <code>hello</code> å‡½æ•°çš„å®ç°ã€‚</strong> è¿™æ—¶ï¼Œç¼–è¯‘å™¨çœ‹åˆ°äº† <code>main.c</code> ä¸­çš„è°ƒç”¨ <code>hello(&quot;å‘µå‘µï¼Œojbk&quot;);</code>ï¼Œç„¶åä¼šåœ¨æ•´ä¸ªå·¥ç¨‹ä¸­æœç´¢åŒ…å«äº† <code>hello</code> å‡½æ•°å®ç°çš„æ–‡ä»¶ã€‚<strong>ç”±äºä½ åŒæ—¶ç¼–è¯‘äº† <code>hello.c</code>ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨æ‰¾åˆ°äº† <code>hello</code> å‡½æ•°çš„å®ç°ã€‚</strong> â€”â€” <em>æ­£æ˜¯å› ä¸ºåŒæ—¶å°† <code>main.c</code> å’Œ <code>hello.c</code> æ”¾åœ¨ä¸€èµ·ç¼–è¯‘ï¼ˆ<code>gcc main.c hello.c -o hello</code>ï¼‰æ‰€ä»¥æ‰ä¸æŠ¥é”™ã€‚</em></p><p>æœ€ç»ˆï¼Œé“¾æ¥å™¨å°† <code>main.o</code> å’Œ <code>hello.o</code> è¿™ä¸¤ä¸ªç›®æ ‡æ–‡ä»¶åˆå¹¶ï¼Œç”Ÿæˆäº†å¯æ‰§è¡Œæ–‡ä»¶ <code>hello</code>ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>gccå­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>GNU</tag>
      
      <tag>GCC</tag>
      
      <tag>C</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>frpå†…ç½‘ç©¿é€--ä½¿ç”¨è®°å½•</title>
    <link href="/posts/75cc0c49/"/>
    <url>/posts/75cc0c49/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ä½¿ç”¨å†…ç½‘ç©¿é€è¿›è¡Œè¿œç¨‹ ssh è®¿é—®</p></blockquote><p>å¦‚æœAã€Bç”µè„‘ä¸åœ¨åŒä¸€å±€åŸŸç½‘çš„æƒ…å†µä¸‹ï¼Œå¹¶ä¸”éƒ½æ²¡æœ‰å…¬ç½‘IPï¼ŒAã€Bä¹‹é—´è¦æƒ³è®¿é—®å°±éœ€è¦å†…ç½‘ç©¿é€äº†</p><p>ä¸€ç§æ–¹æ¡ˆæ˜¯è´­ä¹°æœåŠ¡å•†æä¾›çš„å†…ç½‘ç©¿é€å·¥å…·ï¼Œå¦‚ cpolarï¼š</p><p><img src="/posts/75cc0c49/3c199aac7cbfd9da40b7b055fc837520_MD5.jpeg"></p><p>å›ºå®šç«¯å£å·å¥—é¤149&#x2F;å¹´ï¼Œä¸ç”¨æŠ˜è…¾ã€‚</p><p>å¦ä¸€ç§æ–¹æ¡ˆæ˜¯è´­ä¹°ä¸€ä¸ªæœ‰å…¬ç½‘ IP çš„æœåŠ¡å™¨åšâ€œæ¡¥æ¢â€ï¼Œä½†æ˜¯æœ€ä½é…çš„è½»é‡åº”ç”¨æœåŠ¡å™¨ä»·æ ¼éƒ½åœ¨ä¸€ç™¾å·¦å³ï¼Œä¸æ˜¯ç‰¹åˆ«åˆ’ç®—ã€‚æœ€è¿‘å¹´åº•è…¾è®¯äº‘å’Œé˜¿é‡Œäº‘æ´»åŠ¨ï¼Œå…¥é—¨çš„è½»é‡åº”ç”¨æœåŠ¡å™¨ä»·æ ¼60å‡ å—ï¼Œæœæ–­å…¥æ‰‹~~~</p><p><img src="/posts/75cc0c49/114f2d6e1fe7bfce68d305524913e43c_MD5.jpeg"></p><h2 id="1-äº‹å…ˆå‡†å¤‡"><a href="#1-äº‹å…ˆå‡†å¤‡" class="headerlink" title="1 äº‹å…ˆå‡†å¤‡"></a>1 äº‹å…ˆå‡†å¤‡</h2><ul><li>å…·æœ‰å…¬ç½‘ IP çš„æœåŠ¡å™¨(ubuntu) â€”â€” ğŸ‘Œ</li><li>å‘èµ·è®¿é—®çš„ç”µè„‘(windows) â€”â€” ğŸ‘Œ</li><li>è¢«è®¿é—®çš„ç”µè„‘(Ubuntu) â€”â€” ğŸ‘Œ</li></ul><h2 id="2-ä¸‹è½½-frp"><a href="#2-ä¸‹è½½-frp" class="headerlink" title="2 ä¸‹è½½ frp"></a>2 ä¸‹è½½ frp</h2><p>frp GitHub é¡¹ç›®åœ°å€ï¼š <a href="https://github.com/fatedier/frp">https://github.com/fatedier/frp</a></p><p><img src="/posts/75cc0c49/833eaec4fe82ab68b6b75e32e30e49ea_MD5.jpeg"></p><p>åˆ†åˆ«é’ˆå¯¹ <code>å…·æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨</code> å’Œ <code>è¢«è®¿é—®çš„ç”µè„‘</code> ä¸‹è½½ç›¸åº”çš„ frp ç³»ç»Ÿç‰ˆæœ¬ã€‚æˆ‘è¿™é‡Œçš„ä¸¤ä¸ªä¸»æœºéƒ½æ˜¯ Ubuntu ç³»ç»Ÿï¼Œæ‰€ä»¥ä¸‹è½½ <code>frp_0.53.2_linux_amd64.tar.gz</code> åˆ°ä¸¤ä¸ªä¸»æœºä¸Šï¼Œ<em>æ³¨æ„ï¼šæ¯ä¸ªä¸»æœºä¸Šéƒ½æœ‰ä¸€ä¸ªç›¸åŒç‰ˆæœ¬çš„ <code>frp_0.53.2_linux_amd64.tar.gz</code>ã€‚</em></p><p>è§£å‹åï¼Œå¯¹äº <code>å…·æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨</code> ä½¿ç”¨çš„æ˜¯ frps (frp server)ï¼š</p><p><img src="/posts/75cc0c49/5ee686c92f4042c799cc21d7b58e6761_MD5.jpeg"></p><p>å¯¹äº <code>è¢«è®¿é—®çš„ç”µè„‘</code> ä½¿ç”¨çš„æ˜¯ frpc (frp client)ï¼š</p><p><img src="/posts/75cc0c49/6ab1a7e48358d10033cd8c100bee4dbb_MD5.jpeg"></p><h2 id="3-ä¿®æ”¹-frp-é…ç½®æ–‡ä»¶"><a href="#3-ä¿®æ”¹-frp-é…ç½®æ–‡ä»¶" class="headerlink" title="3 ä¿®æ”¹ frp é…ç½®æ–‡ä»¶"></a>3 ä¿®æ”¹ frp é…ç½®æ–‡ä»¶</h2><h3 id="3-1-å…·æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨-çš„-frps-toml"><a href="#3-1-å…·æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨-çš„-frps-toml" class="headerlink" title="3.1 å…·æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨ çš„ frps.toml"></a>3.1 <code>å…·æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨</code> çš„ <code>frps.toml</code></h3><p><img src="/posts/75cc0c49/afd713590a8abd299f012d8d7932c42d_MD5.jpeg"></p><p>é»˜è®¤çš„å°±è¡Œ~</p><h3 id="3-2-è¢«è®¿é—®çš„ç”µè„‘-çš„-frpc-toml"><a href="#3-2-è¢«è®¿é—®çš„ç”µè„‘-çš„-frpc-toml" class="headerlink" title="3.2 è¢«è®¿é—®çš„ç”µè„‘ çš„ frpc.toml"></a>3.2 <code>è¢«è®¿é—®çš„ç”µè„‘</code> çš„ <code>frpc.toml</code></h3><p><img src="/posts/75cc0c49/b53fa024875ecaa01d19bbf7c1ed6e0e_MD5.jpeg"></p><ul><li><code>serverAddr</code>ï¼šä¿®æ”¹ä¸º <code>å…·æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨</code> çš„ IP</li><li><code>name</code>ï¼šéšæ„å¡«</li><li><code>type</code>ï¼šssh è®¿é—®å¡« <strong>tcp</strong> </li><li><code>remotePort</code>ï¼šé»˜è®¤çš„ 6000 å°±è¡Œ</li></ul><p><img src="/posts/75cc0c49/cb48e711cc8de269bbc0f3592df21c0a_MD5.jpeg"></p><h2 id="4-è®¾ç½®å¼€æœºè‡ªå¯"><a href="#4-è®¾ç½®å¼€æœºè‡ªå¯" class="headerlink" title="4 è®¾ç½®å¼€æœºè‡ªå¯"></a>4 è®¾ç½®å¼€æœºè‡ªå¯</h2><p>ä½¿ç”¨ <code>frps -c frps.toml</code>ã€<code>frpc -c frpc.toml</code> æ¥è¿è¡Œ frp æœåŠ¡ã€‚ä½†æ˜¯æ¯æ¬¡å¼€æœºåéƒ½è¦åœ¨ä¸¤å°ä¸»æœºä¸Šåˆ†åˆ«è¿è¡Œ frp æœåŠ¡ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚ä½¿ç”¨ systemd æ¥å®ç° frp æœåŠ¡çš„å¼€æœºè‡ªå¯ã€‚</p><p>åˆ†åˆ«åœ¨ <code>å…·æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨</code> å’Œ <code>è¢«è®¿é—®çš„ç”µè„‘</code> çš„ä¸»æœºä¸Šä½¿ç”¨ systemd é…ç½®å„è‡ªçš„ frp å¼€æœºè‡ªå¯æœåŠ¡ã€‚</p><h3 id="4-1-å…·æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨-çš„-frps-service"><a href="#4-1-å…·æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨-çš„-frps-service" class="headerlink" title="4.1 å…·æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨ çš„ frps.service"></a>4.1 <code>å…·æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨</code> çš„ <code>frps.service</code></h3><p><code>sudo vim /etc/systemd/system/frps.service</code></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs txt">[Unit]<br>Description=frp server<br>After=network.target network-online.target syslog.target<br>Wants=network.target <br><br>[Service]<br>Type=simple<br>Restart=on-failure<br>RestartSec=5<br>ExecStart=/ä½ çš„è·¯å¾„/frps -c /ä½ çš„è·¯å¾„/frps.toml<br><br>[Install]<br>WantedBy=multi-user.target<br></code></pre></td></tr></table></figure><blockquote><p>åªéœ€è¦é’ˆå¯¹ä½ çš„è·¯å¾„ä¿®æ”¹ [Service] ä¸‹çš„ <code>ExecStart</code>ï¼Œå…¶ä½™çš„ä¸ç”¨ä¿®æ”¹</p></blockquote><p>ç„¶åè¿è¡Œ <code>sudo systemctl daemon-reload</code> å’Œ <code>sudo systemctl enable --now frps.service</code> ä»¥å¯ç”¨ frps å¼€æœºè‡ªå¯ã€‚</p><h3 id="4-2-è¢«è®¿é—®çš„ç”µè„‘-çš„-frpc-service"><a href="#4-2-è¢«è®¿é—®çš„ç”µè„‘-çš„-frpc-service" class="headerlink" title="4.2 è¢«è®¿é—®çš„ç”µè„‘ çš„ frpc.service"></a>4.2 <code>è¢«è®¿é—®çš„ç”µè„‘</code> çš„ <code>frpc.service</code></h3><p><code>sudo vim /etc/systemd/system/frpc.service</code></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs txt">[Unit]<br>Description=frp client <br>After=network.target network-online.target syslog.target<br>Wants=network.target <br><br>[Service]<br>Type=simple<br>Restart=on-failure<br>RestartSec=5<br>ExecStart=/ä½ çš„è·¯å¾„/frpc -c /ä½ çš„è·¯å¾„/frpc.toml<br><br>[Install]<br>WantedBy=multi-user.target<br></code></pre></td></tr></table></figure><blockquote><p>åªéœ€è¦é’ˆå¯¹ä½ çš„è·¯å¾„ä¿®æ”¹ [Service] ä¸‹çš„ <code>ExecStart</code></p></blockquote><p>ç„¶åè¿è¡Œ <code>sudo systemctl daemon-reload</code> å’Œ <code>sudo systemctl enable --now frpc.service</code> ä»¥å¯ç”¨ frpc å¼€æœºè‡ªå¯ã€‚</p><h2 id="5-æ·»åŠ ç«¯å£è§„åˆ™"><a href="#5-æ·»åŠ ç«¯å£è§„åˆ™" class="headerlink" title="5 æ·»åŠ ç«¯å£è§„åˆ™"></a>5 æ·»åŠ ç«¯å£è§„åˆ™</h2><p>éœ€è¦åœ¨ <code>å…·æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨</code> çš„æ§åˆ¶å°é˜²ç«å¢™é‡Œæ”¾è¡Œ 6000ã€7000 ç«¯å£ï¼š</p><p><img src="/posts/75cc0c49/38e6254556ea3130f974c07fc9701bbe_MD5.jpeg"></p><h2 id="6-ç™»å½•ä½¿ç”¨"><a href="#6-ç™»å½•ä½¿ç”¨" class="headerlink" title="6 ç™»å½•ä½¿ç”¨"></a>6 ç™»å½•ä½¿ç”¨</h2><p>åœ¨ <code>å‘èµ·è®¿é—®çš„ç”µè„‘</code> ç«¯è¿œç¨‹ ssh è®¿é—® <code>è¢«è®¿é—®çš„ç”µè„‘</code> ç«¯ã€‚</p><p>åœ¨ <code>å‘èµ·è®¿é—®çš„ç”µè„‘</code> ç«¯ä½¿ç”¨ ssh å·¥å…·ç™»å½• <code>å…·æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨</code> ã€‚<strong>æ³¨æ„ï¼šç™»å½•åœ°å€æ˜¯ä½ è´­ä¹°çš„æœåŠ¡å™¨çš„ IPï¼Œç”¨æˆ·åæ˜¯ <code>è¢«è®¿é—®çš„ç”µè„‘</code> ç«¯çš„ç”¨æˆ·åï¼Œå¯†ç æ˜¯ <code>è¢«è®¿é—®çš„ç”µè„‘</code> ç«¯çš„å¯†ç ï¼Œç«¯å£æ˜¯ <code>6000</code> ã€‚</strong></p><p>ä¾‹å¦‚ï¼š</p><p><img src="/posts/75cc0c49/36ec4a0fd428863e0efeee2536b28cde_MD5.jpeg"></p><h3 id="6-1-VSCode-ç™»å½•é…ç½®"><a href="#6-1-VSCode-ç™»å½•é…ç½®" class="headerlink" title="6.1 VSCode ç™»å½•é…ç½®"></a>6.1 VSCode ç™»å½•é…ç½®</h3><p>æ£é¼“äº†å¥½ä¹…æ‰ç™»å½•æˆåŠŸï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><p><img src="/posts/75cc0c49/568232814519855e8cadd299ddcff3e2_MD5.jpeg"></p><h2 id="é™„"><a href="#é™„" class="headerlink" title="é™„"></a>é™„</h2><p>æœ€è¿‘ fedora40 å‘å¸ƒäº†ï¼Œæƒ³è£…ä¸ªè¯•ä¸€ä¸‹ã€‚åœ¨æŒ‰ç…§æ­¤ç¯‡æ•™ç¨‹é‡æ–°é…ç½® frpc çš„æ—¶å€™å‡ºç°äº†ä¸€äº›é—®é¢˜ã€‚</p><p>åœ¨è®¾ç½®å¥½å®ˆæŠ¤è¿›ç¨‹åï¼Œfrpc å¹¶æ²¡æœ‰æ­£å¸¸è¿è¡Œï¼Œä½¿ç”¨ <code>sudo systemctl status frpc.services</code> çœ‹åˆ° <code>(code=exited, status=203/EXEC)</code> çš„é”™è¯¯ï¼Œç½‘ä¸ŠæŸ¥äº†ä¸€ä¸‹æ˜¯ SELinux çš„åŸå› ï¼Œéœ€è¦å°† SELinux å…³é—­ã€‚</p><p>è¿˜æœ‰ä¸€ç§åŠæ³•ä¸ç”¨å…³é—­ SELinux ï¼š</p><ul><li>ç§»åŠ¨ <code>frpc</code> åˆ° <code>/usr/local/bin/</code> ä¸‹ï¼Œç„¶åå†è¿è¡Œ <code>restorecon -Rv /usr/local/bin</code></li></ul><p>æœ€ç»ˆè§£å†³é—®é¢˜ï¼</p><blockquote><p><a href="https://blog.csdn.net/FaceThePast/article/details/133793704?spm=1001.2101.3001.6661.1&utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-133793704-blog-135368044.235%5Ev43%5Epc_blog_bottom_relevance_base7&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-133793704-blog-135368044.235%5Ev43%5Epc_blog_bottom_relevance_base7&utm_relevant_index=1">è§£å†³åŠæ³•æ–‡ç« </a> ã€<a href="https://unix.stackexchange.com/questions/664811/systemd-service-failing-with-exit-code-status-203-exec">è§£å†³åŠæ³•æ–‡ç« 1</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>DIY</category>
      
    </categories>
    
    
    <tags>
      
      <tag>frp</tag>
      
      <tag>å†…ç½‘ç©¿é€</tag>
      
      <tag>ssh</tag>
      
      <tag>systemd</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
